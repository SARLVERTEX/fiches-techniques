<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vertex Monaco - Fiche Technique</title>
    
    <script src="config.js"></script>

    <script>
        // On récupère l'ID dans l'URL (ex: fiche.html?id=vtx-55)
        const params = new URLSearchParams(window.location.search);
        const produitId = params.get('id');

        if (produitId) {
            const script = document.createElement('script');
            script.src = `produits/${produitId}.js`; // Va chercher le fichier dans le dossier produits/
            script.onload = () => {
                window.PRODUCT_CONFIG = window.PRODUCT_DATA;
                initApp(); // Lance l'affichage une fois les données chargées
            };
            script.onerror = () => {
                document.body.innerHTML = "<div style='color:white; text-align:center; margin-top:100px;'>Produit non trouvé.</div>";
            };
            document.head.appendChild(script);
        }
    </script>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;900&display=swap');
        body { opacity: 0; transition: opacity 0.5s ease; background: #020617; }
        body.loaded { opacity: 1; }
        .vertex-card { border: 1px solid rgba(255, 255, 255, 0.05); }
        .glow-band { background: linear-gradient(90deg, rgba(255, 215, 0, 0) 0%, rgba(255, 215, 0, 0.05) 50%, rgba(255, 215, 0, 0) 100%); border-y: 1px solid rgba(255, 215, 0, 0.1) !important; }
        .scene-3d { perspective: 1200px; width: 100%; height: 260px; display: flex; items-center; justify-content: center; }
        .screen-3d { position: relative; transform-style: preserve-3d; transform: rotateY(-20deg) rotateX(5deg); }
        .face-front { width: 100%; height: 100%; transform: translateZ(10px); background: linear-gradient(135deg, #1e293b 0%, #020617 100%); display: flex; align-items: center; justify-content: center; border: 1px solid rgba(255, 215, 0, 0.2); }
        .vesa-dot { width: 4px; height: 4px; background: #FFD700; border-radius: 50%; box-shadow: 0 0 5px #FFD700; }
        @media print { .no-print { display: none !important; } body { background: white !important; color: black !important; opacity: 1 !important; } .vertex-card { background: white !important; color: black !important; border: 1px solid #ddd !important; } }
    </style>
</head>

<body>
    <div id="main-card" class="max-w-6xl mx-auto vertex-card overflow-hidden shadow-2xl mb-8 relative mt-8">
        <header class="p-8 md:p-12 border-b border-white/5 flex flex-col md:flex-row justify-between items-start gap-6">
            <div class="flex-1">
                <p id="ui-company" class="font-bold uppercase tracking-[0.4em] text-[10px] mb-3"></p>
                <h1 id="ui-titre" class="text-4xl md:text-6xl font-black uppercase tracking-tighter italic mb-4 leading-none text-white"></h1>
                <div id="ui-badges" class="flex flex-wrap gap-3 mb-6"></div>
                <p id="ui-phrase" class="text-slate-400 text-[14px] italic max-w-xl border-l-2 border-[#FFD700] pl-4"></p>
            </div>
            <img id="ui-logo" src="" class="h-16 object-contain">
        </header>

        <section class="p-6 md:p-10 grid lg:grid-cols-12 gap-10">
            <div class="lg:col-span-7 bg-black/20 rounded-[3rem] p-6 border border-white/5 flex items-center justify-center min-h-[400px]">
                <img id="ui-img-main" src="" class="max-w-full max-h-full object-contain transition-transform duration-700">
            </div>
            <div class="lg:col-span-5 flex flex-col gap-6">
                <div class="bg-white/[0.02] rounded-[3rem] p-8 border border-white/5 flex-1 flex flex-col items-center justify-center relative">
                    <div class="scene-3d">
                        <div id="ui-screen-3d" class="screen-3d">
                            <div class="face-front rounded-sm">
                                <span class="text-[12px] font-black text-[#FFD700] italic" id="val-diag"></span>
                            </div>
                            <div class="absolute -top-10 left-0 right-0 border-t border-dashed border-[#FFD700]/30 flex justify-center pt-2">
                                <span class="text-[9px] font-bold text-[#FFD700]" id="val-w"></span>
                            </div>
                            <div class="absolute -left-16 top-0 bottom-0 border-l border-dashed border-[#FFD700]/30 flex items-center">
                                <span class="text-[9px] font-bold text-[#FFD700] -rotate-90" id="val-h"></span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-8 flex items-center gap-4 bg-black/40 p-4 rounded-2xl border border-white/10 w-full">
                        <div class="grid grid-cols-2 gap-2 p-1.5 border border-[#FFD700]/20 rounded"><div class="vesa-dot"></div><div class="vesa-dot"></div><div class="vesa-dot"></div><div class="vesa-dot"></div></div>
                        <div><p class="text-[8px] uppercase text-slate-500 font-black">Fixation VESA</p><p id="val-vesa" class="text-[12px] font-black text-[#FFD700]"></p></div>
                    </div>
                </div>
            </div>
        </section>

        <section class="glow-band py-12 px-10 my-6 flex flex-col md:flex-row gap-12">
            <div class="flex-1">
                <h3 class="text-[#FFD700] font-black text-[11px] tracking-widest uppercase mb-6 flex items-center gap-2"><i data-lucide="package" class="w-4 h-4"></i> Équipement de série</h3>
                <div id="ui-accessoires" class="grid grid-cols-2 gap-6"></div>
            </div>
            <div class="flex-1">
                <h3 class="text-[#FFD700] font-black text-[11px] tracking-widest uppercase mb-6 flex items-center gap-2"><i data-lucide="settings" class="w-4 h-4"></i> Options sur mesure</h3>
                <div id="ui-options" class="grid grid-cols-2 gap-4"></div>
            </div>
        </section>

        <section class="p-10 grid md:grid-cols-3 gap-8">
            <div id="ui-specs-grid" class="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6"></div>
            <div class="bg-white/[0.02] p-8 rounded-[2.5rem] border-l-4 border-[#FFD700]">
                <h3 class="font-black uppercase text-[11px] tracking-widest mb-6 text-white">Équipe Vertex</h3>
                <div id="ui-equipe" class="space-y-4"></div>
            </div>
        </section>

        <footer class="p-10 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-6 text-[9px] text-slate-500 font-bold uppercase">
            <p id="ui-footer-addr"></p>
            <div class="flex gap-8"><p id="ui-footer-ref" class="text-white"></p><p id="ui-footer-sn"></p></div>
        </footer>
    </div>

    <script>
        function initApp() {
            const gc = GLOBAL_CONFIG, pc = window.PRODUCT_CONFIG, d = document;
            if(!pc) return;

            d.body.style.backgroundColor = gc.style.couleurFond;
            d.body.style.fontFamily = gc.style.police;
            const mc = d.getElementById('main-card');
            mc.style.background = gc.style.couleurCarte;
            mc.style.backdropFilter = gc.style.effetFlou;
            mc.style.borderRadius = gc.style.arrondi;

            d.getElementById('ui-company').innerText = gc.brand.nom;
            d.getElementById('ui-company').style.color = gc.style.couleurAccent;
            d.getElementById('ui-logo').src = gc.brand.logo;
            d.getElementById('ui-titre').innerText = pc.produit.titre;
            d.getElementById('ui-phrase').innerText = pc.produit.phraseAccroche;
            d.getElementById('ui-img-main').src = pc.media.imagePrincipale;
            d.getElementById('ui-footer-addr').innerText = gc.brand.adresse;
            d.getElementById('ui-footer-ref').innerText = "REF: " + pc.produit.ref;
            d.getElementById('ui-footer-sn').innerText = "S/N: " + pc.produit.sn;

            d.getElementById('ui-badges').innerHTML = pc.badges.map(b => `<div class="flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full border border-white/10"><i data-lucide="${b.icone}" class="w-3 h-3 ${b.couleur}"></i><span class="text-[10px] font-black uppercase tracking-wider text-white">${b.label}</span></div>`).join('');

            const isLand = pc.dimensions.orientation === "landscape";
            const s3d = d.getElementById('ui-screen-3d');
            s3d.style.width = isLand ? "180px" : "110px";
            s3d.style.height = isLand ? "105px" : "180px";
            d.getElementById('val-diag').innerText = pc.dimensions.diagonale;
            d.getElementById('val-w').innerText = pc.dimensions.largeur;
            d.getElementById('val-h').innerText = pc.dimensions.hauteur;
            d.getElementById('val-vesa').innerText = pc.dimensions.vesa;

            d.getElementById('ui-equipe').innerHTML = gc.equipe.filter(m => m.tel !== "").slice(0,3).map(m => `<div class="border-b border-white/5 pb-3"><p class="text-[10px] font-black text-white">${m.nom}</p><p class="text-[8px] text-slate-500 uppercase">${m.poste}</p><p class="text-[9px] text-[#FFD700] mt-1">${m.tel}</p></div>`).join('');

            d.getElementById('ui-specs-grid').innerHTML = pc.specifications.map(col => `<div class="bg-black/20 p-8 rounded-[2rem] border border-white/5"><h4 class="text-${col.couleur}-400 font-black text-[10px] mb-6 flex items-center gap-2 uppercase tracking-widest"><i data-lucide="${col.icone}" class="w-4 h-4"></i> ${col.titre}</h4><ul class="space-y-3">${col.lignes.map(l => `<li class="flex justify-between text-[11px] border-b border-white/5 pb-2"><span class="text-slate-500 italic">${l[0]}</span><span class="font-bold text-white">${l[1]}</span></li>`).join('')}</ul></div>`).join('');

            d.getElementById('ui-accessoires').innerHTML = pc.accessoires.map(a => `<div><p class="text-[10px] font-bold text-white uppercase">${a.nom}</p><p class="text-[9px] text-slate-500 italic">${a.detail}</p></div>`).join('');
            d.getElementById('ui-options').innerHTML = pc.options.map(o => `<div class="flex items-center gap-3 bg-white/5 p-3 rounded-xl border border-white/5"><i data-lucide="${o.icone}" class="w-3.5 h-3.5 text-[#FFD700]"></i><span class="text-[9px] font-bold uppercase text-white">${o.nom}</span></div>`).join('');

            lucide.createIcons();
            d.body.classList.add('loaded');
        }
    </script>
</body>
</html>
