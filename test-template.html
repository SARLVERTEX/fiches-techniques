<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="images/logo-vertex.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vertex Monaco - Fiche Technique</title>
    <style type="text/css" media="print">
        @page { size: auto; margin: 20mm; }
        body { margin: 0; }
    </style>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;900&display=swap');
        html { scroll-behavior: smooth; }
        body { background: #020617; color: white; font-family: 'Outfit', sans-serif; overflow-x: hidden; -webkit-font-smoothing: antialiased; }
        #main-card { display: none; opacity: 0; transition: opacity 0.8s ease-in-out; }
        
        /* 3D Effects */
        .scene-3d { perspective: 1200px; display: flex; align-items: center; justify-content: center; min-height: 250px; width: 100%; }
        .screen-3d { position: relative; transform-style: preserve-3d; transform: rotateY(-15deg) rotateX(5deg); transition: transform 0.5s ease; }
        .face-front { width: 100%; height: 100%; transform: translateZ(10px); background: linear-gradient(135deg, #1e293b 0%, #020617 100%); display: flex; align-items: center; justify-content: center; border: 1px solid rgba(255,215,0,0.3); box-shadow: 0 0 30px rgba(0,0,0,0.5); }

        /* Zoom & Admin */
        .zoomable-container { position: relative; cursor: pointer; overflow: hidden; }
        .admin-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.6); display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 0.5rem; opacity: 0; transition: 0.3s; z-index: 20; }
        .zoomable-container:hover .admin-overlay { opacity: 1; }
        
        .admin-overlay-label {
            font-size: 0.7rem;
            font-weight: 700;
            color: #FFD700;
            text-transform: uppercase;
        }

        #zoom-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(2, 6, 23, 0.98); z-index: 9999; display: none; align-items: center; justify-content: center; cursor: zoom-out; backdrop-filter: blur(10px); }
        #zoom-overlay img { max-width: 90%; max-height: 90%; border-radius: 1rem; box-shadow: 0 0 50px rgba(0,0,0,0.5); object-fit: contain; }
        #zoom-overlay::before {
            content: '‚úï Cliquer pour fermer';
            position: absolute;
            top: 20px;
            right: 20px;
            color: #FFD700;
            background: rgba(0,0,0,0.8);
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* Print Options Panel */
        #print-options-panel {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100vh;
            background: rgba(15, 23, 42, 0.98);
            backdrop-filter: blur(20px);
            border-left: 1px solid rgba(255, 215, 0, 0.2);
            z-index: 100;
            transition: right 0.3s ease;
            overflow-y: auto;
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.5);
        }
        
        #print-options-panel.open {
            right: 0;
        }
        
        .print-option-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .print-option-item:hover {
            background: rgba(255, 215, 0, 0.05);
        }
        
        .print-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #FFD700;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .print-checkbox.checked {
            background: #FFD700;
        }
        
        .print-checkbox.checked::after {
            content: '‚úì';
            color: #020617;
            font-weight: bold;
            font-size: 14px;
        }

        @media print {
            @page { 
                size: A4 portrait; 
                margin: 20mm;
            }
            
            /* MASQUER LES EN-T√äTES ET PIEDS DE PAGE DU NAVIGATEUR */
            @page {
                margin-top: 20mm;
                margin-bottom: 20mm;
            }
            
            @page :first {
                margin-top: 20mm;
            }
            
            @page :last {
                margin-bottom: 20mm;
            }
            
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                color-adjust: exact !important;
            }
            
            /* D√âSACTIVER LES URLS AUTOMATIQUES DU NAVIGATEUR */
            a[href]:after {
                content: none !important;
            }
            
            abbr[title]:after {
                content: none !important;
            }
            
            /* Forcer la suppression de tout lien */
            a {
                text-decoration: none !important;
                color: inherit !important;
            }
            
            a[href^="http"]:after,
            a[href^="https://"]:after {
                content: "" !important;
                display: none !important;
            }
            
            html, body { 
                background: white !important; 
                color: #1a1a1a !important;
                padding: 0 !important; 
                margin: 0 !important;
                font-size: 10pt !important;
                line-height: 1.6 !important;
            }
            
            #main-card { 
                display: block !important; 
                opacity: 1 !important; 
                width: 100% !important; 
                max-width: 100% !important;
                border-radius: 0 !important; 
                margin: 0 !important; 
                padding: 0 !important;
                border: none !important; 
                background: white !important;
                box-shadow: none !important;
            }
            
            /* Hide non-printable elements */
            #btn-print, #btn-back, #lang-switcher, #admin-ui, .contact-actions, 
            .admin-overlay, #zoom-overlay, #print-options-panel, #btn-print-options { 
                display: none !important; 
            }
            
            /* Hide ALL links and their content */
            a, a[href], a[href^="http"], a[href^="https://"] {
                color: inherit !important;
                text-decoration: none !important;
            }
            
            a::after, a[href]::after, a[href^="http"]::after, a[href^="https://"]::after {
                content: "" !important;
                display: none !important;
            }
            
            /* MASQUER COMPL√àTEMENT LES LIENS HTTPS */
            a[href^="http"],
            a[href^="https://"] {
                display: none !important;
                visibility: hidden !important;
                position: absolute !important;
                left: -9999px !important;
                width: 0 !important;
                height: 0 !important;
                overflow: hidden !important;
            }
            
            /* ========== HEADER ========== */
            header {
                background: white !important;
                border-bottom: 3px solid #FFD700 !important;
                padding: 0 0 8mm 0 !important;
                margin-bottom: 10mm !important;
                page-break-after: avoid !important;
                page-break-inside: avoid !important;
            }
            
            #ui-brand {
                color: #FFD700 !important;
                font-size: 8pt !important;
                margin-bottom: 4mm !important;
                letter-spacing: 0.3em !important;
            }
            
            #ui-titre {
                color: #1a1a1a !important;
                font-size: 22pt !important;
                line-height: 1.1 !important;
                margin-bottom: 5mm !important;
            }
            
            #ui-logo {
                height: 18mm !important;
                max-height: 18mm !important;
            }
            
            #ui-badges {
                gap: 3mm !important;
            }
            
            .ui-badge-print {
                background: #f9f9f9 !important;
                border: 1.5px solid #FFD700 !important;
                color: #1a1a1a !important;
                padding: 2mm 4mm !important;
                font-size: 7pt !important;
                border-radius: 3mm !important;
            }
            
            .ui-badge-print i {
                width: 3.5mm !important;
                height: 3.5mm !important;
            }
            
            /* ========== SECTION IMAGES + 3D ========== */
            .print-grid-2cols {
                display: block !important;
                margin-bottom: 0 !important;
                page-break-inside: avoid !important;
                page-break-after: always !important;
                page-break-before: avoid !important;
            }
            
            /* Left column: Images */
            .print-col-left {
                display: block !important;
                margin-bottom: 0 !important;
            }
            
            #main-img-container {
                background: white !important;
                border: 2px solid #e8e8e8 !important;
                border-radius: 6mm !important;
                padding: 8mm !important;
                min-height: 100mm !important;
                max-height: 100mm !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                page-break-inside: avoid !important;
                page-break-after: avoid !important;
                box-shadow: 0 2px 6px rgba(0,0,0,0.08) !important;
                margin-bottom: 8mm !important;
            }
            
            #ui-main-img {
                max-width: 100% !important;
                max-height: 92mm !important;
                object-fit: contain !important;
            }
            
            /* Gallery - AGRANDI et plus visible */
            #ui-galerie {
                display: grid !important;
                grid-template-columns: 1fr 1fr 1fr !important;
                gap: 6mm !important;
                margin-bottom: 0 !important;
                page-break-inside: avoid !important;
            }
            
            #ui-galerie > div {
                background: white !important;
                border: 2px solid #e8e8e8 !important;
                border-radius: 5mm !important;
                padding: 4mm !important;
                box-shadow: 0 2px 6px rgba(0,0,0,0.08) !important;
                height: 75mm !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            #ui-galerie img {
                max-width: 100% !important;
                max-height: 70mm !important;
                width: 100% !important;
                height: 100% !important;
                object-fit: contain !important;
                border-radius: 2mm !important;
            }
            
            /* Right column: 3D Section */
            .print-col-right {
                display: none !important;
            }
            
            /* ========== INCLUDED + OPTIONS SECTION ========== */
            .print-section-inclus-options {
                background: #fafafa !important;
                border: none !important;
                border-radius: 6mm !important;
                padding: 6mm 8mm !important;
                margin: 0 0 8mm 0 !important;
                page-break-inside: avoid;
            }
            
            .print-section-flex {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 10mm !important;
            }
            
            /* MASQUER les options de personnalisation */
            .print-section-flex > div:last-child {
                display: none !important;
            }
            
            .print-section-inclus-options h3 {
                color: #FFD700 !important;
                font-size: 9pt !important;
                margin-bottom: 4mm !important;
                display: flex !important;
                align-items: center !important;
                gap: 3mm !important;
                letter-spacing: 0.08em !important;
                font-weight: 900 !important;
            }
            
            .print-section-inclus-options h3 i {
                width: 4mm !important;
                height: 4mm !important;
            }
            
            /* Accessories - COMPACTE */
            #ui-acc {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important;
                gap: 3mm 6mm !important;
            }
            
            #ui-acc > div {
                page-break-inside: avoid;
                padding-bottom: 0 !important;
                border-bottom: none !important;
            }
            
            #ui-acc p:first-child {
                font-size: 8pt !important;
                color: #1a1a1a !important;
                margin-bottom: 1.5mm !important;
                font-weight: 700 !important;
            }
            
            #ui-acc p:last-child {
                font-size: 7pt !important;
                color: #666 !important;
                line-height: 1.4 !important;
            }
            
            /* Options */
            #ui-opt {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 5mm !important;
            }
            
            #ui-opt > div {
                background: white !important;
                border: 1.5px solid #e8e8e8 !important;
                border-radius: 4mm !important;
                padding: 5mm 6mm !important;
                color: #1a1a1a !important;
                font-size: 8pt !important;
                display: flex !important;
                align-items: center !important;
                gap: 3mm !important;
                font-weight: 600 !important;
            }
            
            #ui-opt i {
                width: 4mm !important;
                height: 4mm !important;
                color: #FFD700 !important;
            }
            
            /* ========== SPECS + SIDEBAR ========== */
            .print-grid-specs {
                display: block !important;
                padding: 0 !important;
                margin-bottom: 10mm !important;
            }
            
            /* Specs - 2 columns */
            #ui-specs {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important;
                gap: 6mm !important;
                margin-bottom: 8mm !important;
            }
            
            #ui-specs > div {
                background: white !important;
                border: 1.5px solid #e8e8e8 !important;
                border-radius: 5mm !important;
                padding: 6mm !important;
                page-break-inside: avoid;
                box-shadow: 0 2px 4px rgba(0,0,0,0.06) !important;
            }
            
            #ui-specs h4 {
                color: #1a1a1a !important;
                font-size: 9pt !important;
                margin-bottom: 5mm !important;
                display: flex !important;
                align-items: center !important;
                gap: 3mm !important;
                font-weight: 900 !important;
                letter-spacing: 0.02em !important;
            }
            
            #ui-specs h4 i {
                width: 5mm !important;
                height: 5mm !important;
            }
            
            #ui-specs .space-y-2 > div {
                display: flex !important;
                justify-content: space-between !important;
                border-bottom: 1px solid #f0f0f0 !important;
                padding-bottom: 2mm !important;
                margin-bottom: 2mm !important;
                font-size: 8pt !important;
            }
            
            #ui-specs .space-y-2 > div:last-child {
                border-bottom: none !important;
                margin-bottom: 0 !important;
                padding-bottom: 0 !important;
            }
            
            #ui-specs .text-slate-500 {
                color: #666 !important;
            }
            
            #ui-specs .text-white {
                color: #1a1a1a !important;
                font-weight: 700 !important;
            }
            
            /* Sidebar - FULL WIDTH */
            .print-sidebar {
                display: flex !important;
                flex-direction: column !important;
                gap: 6mm !important;
            }
            
            /* Team - PERFECTLY ALIGNED HORIZONTAL LINE */
            .bg-white\/\[0\.03\] {
                background: white !important;
                border-left: 4px solid #FFD700 !important;
                border-radius: 5mm !important;
                padding: 4mm 6mm !important;
                box-shadow: 0 2px 4px rgba(0,0,0,0.06) !important;
            }
            
            #txt-expert-title {
                font-size: 8pt !important;
                color: #1a1a1a !important;
                margin-bottom: 3mm !important;
                font-weight: 900 !important;
                letter-spacing: 0.05em !important;
            }
            
            #ui-team {
                display: flex !important;
                flex-direction: row !important;
                align-items: stretch !important;
                gap: 0 !important;
                height: auto !important;
            }
            
            #ui-team > div {
                border-bottom: none !important;
                padding: 2mm 4mm !important;
                margin-bottom: 0 !important;
                background: transparent !important;
                border-radius: 0 !important;
                text-align: center !important;
                border-left: none !important;
                border-right: 1px solid #e0e0e0 !important;
                flex: 1 !important;
                display: flex !important;
                flex-direction: column !important;
                justify-content: center !important;
                align-items: center !important;
                min-height: 12mm !important;
            }
            
            #ui-team > div:last-child {
                border-right: none !important;
            }
            
            #ui-team > div:first-child {
                padding-left: 2mm !important;
            }
            
            #ui-team p {
                margin: 0 !important;
                padding: 0 !important;
                width: 100% !important;
            }
            
            #ui-team p:first-child {
                font-size: 7pt !important;
                color: #1a1a1a !important;
                margin-bottom: 1mm !important;
                font-weight: 700 !important;
                line-height: 1.2 !important;
            }
            
            #ui-team p:last-child {
                font-size: 6pt !important;
                color: #666 !important;
                line-height: 1.2 !important;
                text-transform: uppercase !important;
            }
            
            /* Maintenance - PERFECTLY ALIGNED 2 COLUMNS */
            .bg-black\/20 {
                background: white !important;
                border: 1.5px solid #e8e8e8 !important;
                border-radius: 5mm !important;
                padding: 4mm 6mm !important;
                box-shadow: 0 2px 4px rgba(0,0,0,0.06) !important;
                min-height: 12mm !important;
                display: flex !important;
                flex-direction: column !important;
                justify-content: center !important;
            }
            
            #txt-entretien-title {
                color: #FFD700 !important;
                font-size: 8pt !important;
                margin-bottom: 3mm !important;
                font-weight: 900 !important;
                letter-spacing: 0.05em !important;
            }
            
            #ui-entret-list {
                margin: 0 !important;
                padding: 0 !important;
                list-style: none !important;
                display: grid !important;
                grid-template-columns: 1fr 1fr !important;
                gap: 2.5mm 8mm !important;
                align-items: start !important;
            }
            
            #ui-entret-list li {
                display: flex !important;
                align-items: flex-start !important;
                gap: 2mm !important;
                margin: 0 !important;
                padding: 0 !important;
                font-size: 6.5pt !important;
                color: #1a1a1a !important;
                line-height: 1.35 !important;
            }
            
            #ui-entret-list li .text-\[\#FFD700\] {
                flex-shrink: 0 !important;
                font-size: 7pt !important;
                line-height: 1.2 !important;
                display: inline-block !important;
                width: 3mm !important;
                text-align: center !important;
            }
            
            #ui-entret-list li:last-child {
                margin-bottom: 0 !important;
            }
            
            #ui-entret-list .text-\[\#FFD700\] {
                color: #FFD700 !important;
                flex-shrink: 0 !important;
                font-weight: 700 !important;
            }
            
            /* ========== FOOTER ========== */
            footer {
                background: white !important;
                border-top: 2px solid #e8e8e8 !important;
                padding: 6mm 0 0 0 !important;
                margin-top: 8mm !important;
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                font-size: 7pt !important;
                color: #666 !important;
            }
            
            footer .text-white {
                color: #1a1a1a !important;
                font-weight: 700 !important;
            }
            
            #ui-sn {
                opacity: 0.4 !important;
            }
            
            /* MASQUER COMPL√àTEMENT TOUS LES LIENS */
            footer::after {
                content: none !important;
                display: none !important;
            }
            
            /* Cacher tous les √©l√©ments <a> dans le footer */
            footer a,
            footer a[href],
            footer a[href^="http"],
            footer a[href^="https://"],
            footer a[href*="github"],
            #ui-addr a,
            #ui-addr a[href] {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
                content: "" !important;
                font-size: 0 !important;
                line-height: 0 !important;
                height: 0 !important;
                width: 0 !important;
                position: absolute !important;
                left: -99999px !important;
            }
            
            footer a::before,
            footer a::after,
            footer a[href]::before,
            footer a[href]::after {
                content: none !important;
                display: none !important;
            }
            
            /* Supprimer le contenu g√©n√©r√© automatiquement par le navigateur */
            @media print {
                footer a[href]:after {
                    content: none !important;
                }
                
                /* Masquer tout texte contenant "github" ou "http" */
                footer *:contains("github"),
                footer *:contains("http") {
                    display: none !important;
                }
            }
            
            /* ========== CONDITIONAL SECTIONS (based on user selection) ========== */
            .print-hide-header header {
                display: none !important;
            }
            
            .print-hide-images .print-grid-2cols {
                display: none !important;
            }
            
            .print-hide-inclus-options .print-section-inclus-options {
                display: none !important;
            }
            
            .print-hide-specs .print-grid-specs {
                display: none !important;
            }
            
            .print-hide-footer footer {
                display: none !important;
            }
            
            /* ========== GLOBAL OPTIMIZATIONS ========== */
            .border-white\/5, .border-white\/10 {
                border-color: #e8e8e8 !important;
            }
            
            /* MASQUER D√âFINITIVEMENT LES LIENS GITHUB */
            body::after,
            html::after {
                display: none !important;
                content: none !important;
            }
            
            /* Masquer tout texte en bas de page contenant http ou github */
            body > a,
            body > a[href],
            html > a {
                display: none !important;
                visibility: hidden !important;
                position: absolute !important;
                left: -99999px !important;
            }
            
            /* Prevent breaks */
            h1, h2, h3, h4 {
                page-break-after: avoid !important;
            }
            
            img {
                page-break-inside: avoid !important;
            }
            
            /* MASQUER ABSOLUMENT TOUT LIEN ET CONTENU APR√àS LE FOOTER */
            footer ~ *,
            footer + *,
            body > *:last-child {
                display: none !important;
                visibility: hidden !important;
                position: absolute !important;
                left: -99999px !important;
            }
            
            /* Masquer les liens g√©n√©r√©s par le navigateur */
            body::after,
            html::after,
            #main-card::after {
                content: none !important;
                display: none !important;
            }
            
            /* Masquer sp√©cifiquement les liens github */
            a[href*="github"],
            a[href*="git"],
            *[href*="github"],
            *:contains("github") {
                display: none !important;
                visibility: hidden !important;
                position: absolute !important;
                left: -99999px !important;
            }
            
            /* Masquer tout ce qui n'est PAS dans #main-card */
            body > *:not(#main-card):not(script):not(style) {
                display: none !important;
                visibility: hidden !important;
                position: absolute !important;
                left: -99999px !important;
            }
            
            /* Forcer l'affichage uniquement de #main-card */
            #main-card {
                display: block !important;
                opacity: 1 !important;
            }
            
            /* Optimized spacing */
            .p-6, .p-8, .p-10, .p-14 {
                padding: 0 !important;
            }
            
            .gap-6, .gap-8 {
                gap: 8mm !important;
            }
        }
    </style>
</head>
<body class="p-2 md:p-8">

    <!-- Back Button -->
    <div class="fixed top-4 left-4 md:top-8 md:left-8 z-50 flex gap-2">
        <a id="btn-back" href="index.html" class="bg-white/10 backdrop-blur-md border border-white/10 text-white p-3 md:px-5 md:py-3 rounded-full flex items-center gap-2 font-bold uppercase text-[10px] hover:bg-[#FFD700] hover:text-black transition-all">
            <i data-lucide="arrow-left" class="w-4 h-4"></i> <span id="txt-showroom" class="hidden md:inline"></span>
        </a>
    </div>

    <!-- Language Switcher -->
    <div id="lang-switcher" class="fixed top-4 right-4 z-50 flex bg-white/10 backdrop-blur-md rounded-full p-1 border border-white/10">
        <button onclick="changeLang('fr')" id="lang-fr" class="px-3 py-1 rounded-full text-[10px] font-bold transition-all">FR</button>
        <button onclick="changeLang('en')" id="lang-en" class="px-3 py-1 rounded-full text-[10px] font-bold transition-all">EN</button>
    </div>

    <!-- Print Options Button -->
    <button id="btn-print-options" onclick="togglePrintOptions()" class="fixed bottom-6 right-24 z-50 bg-white/10 backdrop-blur-md border border-[#FFD700]/50 text-[#FFD700] p-4 rounded-full shadow-2xl hover:bg-[#FFD700] hover:text-black transition-all flex items-center gap-2 font-bold uppercase text-[10px]">
        <i data-lucide="settings" class="w-4 h-4"></i> <span class="hidden md:inline">Options</span>
    </button>

    <!-- Print Button -->
    <button id="btn-print" onclick="window.print()" class="fixed bottom-6 right-6 z-50 bg-[#FFD700] text-black p-4 rounded-full shadow-2xl hover:scale-110 transition-transform flex items-center gap-2 font-bold uppercase text-[10px]">
        <i data-lucide="printer" class="w-4 h-4"></i> <span id="txt-print" class="hidden md:inline"></span>
    </button>

    <!-- Print Options Panel -->
    <div id="print-options-panel">
        <div class="p-6 border-b border-white/10 sticky top-0 bg-slate-900/95 backdrop-blur-xl z-10">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-[#FFD700] font-black text-sm uppercase tracking-wider">Options d'impression</h3>
                <button onclick="togglePrintOptions()" class="text-white hover:text-[#FFD700] transition">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            <div class="flex gap-2">
                <button onclick="selectAllSections()" class="flex-1 bg-[#FFD700]/20 text-[#FFD700] px-3 py-2 rounded-lg text-[10px] font-bold uppercase hover:bg-[#FFD700]/30 transition">
                    Tout s√©lectionner
                </button>
                <button onclick="deselectAllSections()" class="flex-1 bg-white/5 text-white px-3 py-2 rounded-lg text-[10px] font-bold uppercase hover:bg-white/10 transition">
                    Tout d√©s√©lectionner
                </button>
            </div>
        </div>
        
        <div class="p-4">
            <div class="print-option-item" onclick="toggleSection('header')">
                <div class="print-checkbox checked" data-section="header"></div>
                <div class="flex-1">
                    <div class="text-white font-bold text-xs uppercase">En-t√™te</div>
                    <div class="text-slate-400 text-[10px] mt-1">Logo, titre, badges</div>
                </div>
                <i data-lucide="file-text" class="w-4 h-4 text-[#FFD700]"></i>
            </div>
            
            <div class="print-option-item" onclick="toggleSection('images')">
                <div class="print-checkbox checked" data-section="images"></div>
                <div class="flex-1">
                    <div class="text-white font-bold text-xs uppercase">Images & Dimensions</div>
                    <div class="text-slate-400 text-[10px] mt-1">Photo principale, galerie, sch√©ma 3D</div>
                </div>
                <i data-lucide="image" class="w-4 h-4 text-[#FFD700]"></i>
            </div>
            
            <div class="print-option-item" onclick="toggleSection('inclus-options')">
                <div class="print-checkbox checked" data-section="inclus-options"></div>
                <div class="flex-1">
                    <div class="text-white font-bold text-xs uppercase">Inclus & Options</div>
                    <div class="text-slate-400 text-[10px] mt-1">Accessoires, options de personnalisation</div>
                </div>
                <i data-lucide="package" class="w-4 h-4 text-[#FFD700]"></i>
            </div>
            
            <div class="print-option-item" onclick="toggleSection('specs')">
                <div class="print-checkbox checked" data-section="specs"></div>
                <div class="flex-1">
                    <div class="text-white font-bold text-xs uppercase">Sp√©cifications & √âquipe</div>
                    <div class="text-slate-400 text-[10px] mt-1">Caract√©ristiques techniques, experts, entretien</div>
                </div>
                <i data-lucide="clipboard-list" class="w-4 h-4 text-[#FFD700]"></i>
            </div>
            
            <div class="print-option-item" onclick="toggleSection('footer')">
                <div class="print-checkbox checked" data-section="footer"></div>
                <div class="flex-1">
                    <div class="text-white font-bold text-xs uppercase">Pied de page</div>
                    <div class="text-slate-400 text-[10px] mt-1">Adresse, r√©f√©rence, num√©ro de s√©rie</div>
                </div>
                <i data-lucide="map-pin" class="w-4 h-4 text-[#FFD700]"></i>
            </div>
        </div>
        
        <div class="p-6 border-t border-white/10">
            <button onclick="window.print(); togglePrintOptions();" class="w-full bg-[#FFD700] text-black py-3 rounded-lg font-black uppercase text-xs hover:bg-[#FFD700]/90 transition flex items-center justify-center gap-2">
                <i data-lucide="printer" class="w-4 h-4"></i>
                Imprimer la s√©lection
            </button>
        </div>
    </div>

    <div id="main-card" class="max-w-6xl mx-auto border border-white/5 rounded-[2rem] md:rounded-[3rem] overflow-hidden bg-slate-900/50 backdrop-blur-xl mt-12 md:mt-0 shadow-2xl">
        <header class="p-8 md:p-14 border-b border-white/5 flex flex-col md:flex-row justify-between items-center md:items-start gap-8 text-center md:text-left">
            <div class="flex-1 w-full">
                <p id="ui-brand" class="font-bold uppercase tracking-[0.4em] text-[9px] md:text-[11px] mb-4 text-[#FFD700]"></p>
                <h1 id="ui-titre" class="text-3xl md:text-7xl font-black uppercase tracking-tighter italic leading-tight md:leading-[0.9] mb-6 break-words"></h1>
                <div id="ui-badges" class="flex flex-wrap justify-center md:justify-start gap-2 md:gap-3"></div>
            </div>
            <img id="ui-logo" src="" class="h-12 md:h-16 object-contain">
        </header>

        <div class="print-grid-2cols grid lg:grid-cols-2 gap-6 md:gap-8 p-6 md:p-10">
            <div class="print-col-left space-y-6">
                <div id="main-img-container" class="zoomable-container bg-black/30 rounded-[2rem] md:rounded-[3rem] p-6 md:p-10 border border-white/5 flex items-center justify-center min-h-[300px] md:min-h-[450px]">
                    <div id="admin-main-photo" class="admin-overlay"></div>
                    <img id="ui-main-img" src="" class="max-w-full max-h-[350px] object-contain drop-shadow-2xl">
                </div>
                <div id="ui-galerie" class="grid grid-cols-3 gap-3 md:gap-4"></div>
            </div>

            <div class="print-col-right bg-white/[0.03] rounded-[2rem] md:rounded-[3rem] p-6 md:p-10 border border-white/5 flex flex-col items-center justify-center">
                <div class="scene-3d">
                    <div id="ui-3d" class="screen-3d">
                        <div class="face-front rounded-sm"><span id="val-diag" class="font-black italic text-[#FFD700] text-xl md:text-3xl"></span></div>
                        <div class="absolute -top-10 left-0 right-0 border-t border-dashed border-[#FFD700]/40 flex justify-center pt-2 text-[#FFD700] text-[9px] font-bold" id="val-w"></div>
                        <div class="absolute -left-12 top-0 bottom-0 border-l border-dashed border-[#FFD700]/40 flex items-center text-[#FFD700] text-[9px] font-bold"><span id="val-h" class="-rotate-90 whitespace-nowrap"></span></div>
                    </div>
                </div>
                <div class="mt-8 bg-black/50 p-5 rounded-2xl border border-[#FFD700]/20 w-full flex items-center gap-4">
                    <div class="grid grid-cols-2 gap-1.5"><div class="w-1.5 h-1.5 bg-[#FFD700] rounded-full"></div><div class="w-1.5 h-1.5 bg-[#FFD700] rounded-full"></div></div>
                    <div><p id="txt-fixation" class="text-[8px] uppercase text-slate-500 font-black tracking-widest leading-none mb-1"></p><p id="val-vesa" class="text-xs md:text-sm font-black text-[#FFD700] uppercase"></p></div>
                </div>
            </div>
        </div>

        <section class="print-section-inclus-options py-10 px-6 md:px-10 border-y border-white/5 bg-white/[0.01]">
            <div class="print-section-flex flex flex-col md:flex-row gap-12 md:gap-16">
                <div class="flex-1">
                    <h3 id="txt-inclus-title" class="text-[#FFD700] font-black text-[10px] tracking-[0.2em] uppercase mb-8 flex items-center gap-3"></h3>
                    <div id="ui-acc" class="grid grid-cols-1 sm:grid-cols-2 gap-6"></div>
                </div>
                <div class="flex-1 border-t border-white/5 md:border-0 pt-10 md:pt-0">
                    <h3 id="txt-options-title" class="text-[#FFD700] font-black text-[10px] tracking-[0.2em] uppercase mb-8 flex items-center gap-3"></h3>
                    <div id="ui-opt" class="grid grid-cols-1 sm:grid-cols-2 gap-3"></div>
                </div>
            </div>
        </section>

        <div class="print-grid-specs p-6 md:p-10 grid lg:grid-cols-3 gap-8">
            <div id="ui-specs" class="lg:col-span-2 grid md:grid-cols-2 gap-8"></div>
            <div class="print-sidebar space-y-6">
                <div class="bg-white/[0.03] p-8 rounded-[2rem] border-l-4 border-[#FFD700]">
                    <h3 id="txt-expert-title" class="font-black uppercase text-[10px] mb-8 tracking-widest"></h3>
                    <div id="ui-team" class="space-y-6"></div>
                </div>
                <div class="bg-black/20 p-8 rounded-[2rem] border border-white/5">
                    <h3 id="txt-entretien-title" class="text-[#FFD700] font-black uppercase text-[10px] mb-6 tracking-widest"></h3>
                    <ul id="ui-entret-list" class="space-y-3 text-[9px] text-slate-400 italic"></ul>
                </div>
            </div>
        </div>

        <footer class="p-10 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-6 text-[9px] text-slate-500 font-bold uppercase tracking-widest">
            <p id="ui-addr"></p>
            <div class="flex gap-8 text-white"><p id="ui-ref"></p><p id="ui-sn" class="opacity-30"></p></div>
        </footer>
    </div>

    <div id="zoom-overlay"></div>

    <script>
        /* ============================================================
           CONFIGURATION & ADMIN MODULE
        ============================================================ */
        const REPO_OWNER = "sarlvertex";
        const REPO_NAME = "fiches-techniques";
        const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB
        
        const version = new Date().getTime();
        const params = new URLSearchParams(window.location.search);
        const produitId = params.get('id');
        const dossier = params.get('dir') || 'produits';
        const currentLang = params.get('lang') || 'fr';
        const isAdmin = params.get('admin') === '1';

        const UI_STRINGS = {
            fr: { showroom: "Retour Showroom", print: "G√©n√©rer PDF / Imprimer", fixation: "Syst√®me de Fixation", inclus: "Inclus dans le Pack", options: "Options de Personnalisation", expert: "Votre Expert Vertex", entretien: "Consignes d'Entretien" },
            en: { showroom: "Back to Showroom", print: "Generate PDF / Print", fixation: "Mounting System", inclus: "Included in Pack", options: "Customization Options", expert: "Your Vertex Expert", entretien: "Maintenance Rules" }
        };

        const t = (obj) => (obj && typeof obj === 'object') ? (obj[currentLang] || obj['fr']) : (obj || "");

        // Print options management
        function togglePrintOptions() {
            const panel = document.getElementById('print-options-panel');
            panel.classList.toggle('open');
        }

        function toggleSection(section) {
            const checkbox = document.querySelector(`[data-section="${section}"]`);
            checkbox.classList.toggle('checked');
            document.body.classList.toggle(`print-hide-${section}`);
        }

        function selectAllSections() {
            const checkboxes = document.querySelectorAll('.print-checkbox');
            checkboxes.forEach(cb => {
                cb.classList.add('checked');
                const section = cb.getAttribute('data-section');
                document.body.classList.remove(`print-hide-${section}`);
            });
        }

        function deselectAllSections() {
            const checkboxes = document.querySelectorAll('.print-checkbox');
            checkboxes.forEach(cb => {
                cb.classList.remove('checked');
                const section = cb.getAttribute('data-section');
                document.body.classList.add(`print-hide-${section}`);
            });
        }

        // --- CAMERA ENGINE ---
        const cameraInput = document.createElement('input');
        cameraInput.type = 'file'; 
        cameraInput.accept = 'image/*'; 
        cameraInput.capture = 'environment'; 
        cameraInput.className = 'hidden';
        document.body.appendChild(cameraInput);
        
        let uploadTarget = "";
        let uploadType = "";
        let galleryIndex = null;

        function startUpload(fileName, type, gIndex) {
            uploadType = type;
            galleryIndex = gIndex;
            uploadTarget = `${dossier}/images/${fileName}`;
            
            console.log('Starting upload:', { fileName, type, gIndex, uploadTarget });
            
            let token = localStorage.getItem('gh_token');
            if (!token) {
                token = prompt("Token GitHub requis (avec permissions repo) :");
                if (token) localStorage.setItem('gh_token', token);
            }
            if (token) cameraInput.click();
        }

        cameraInput.onchange = async (e) => {
            const file = e.target.files[0]; 
            if (!file) return;
            
            e.target.value = ''; // Reset
            
            // V√©rifier la taille
            if (file.size > MAX_FILE_SIZE) {
                alert("‚ùå Fichier trop volumineux (max 5MB)");
                return;
            }
            
            const imageTypeLabel = uploadType === 'main' ? 'principale' : `galerie ${galleryIndex}`;
            const uploading = document.createElement('div');
            uploading.style.cssText = 'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.9); padding: 2rem; border-radius: 1rem; z-index: 99999; color: white; font-weight: bold; text-align: center;';
            uploading.innerHTML = `üîÑ Upload image ${imageTypeLabel}...<br><small style="opacity: 0.7;">${(file.size / 1024).toFixed(0)} KB</small>`;
            document.body.appendChild(uploading);
            
            const reader = new FileReader(); 
            reader.readAsDataURL(file);
            reader.onload = async () => {
                const base64 = reader.result.split(',')[1];
                const token = localStorage.getItem('gh_token');
                let sha = "";
                
                try {
                    const res = await fetch(`https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${uploadTarget}`, {
                        headers: { 
                            'Authorization': `Bearer ${token}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    });
                    if (res.ok) { 
                        const data = await res.json(); 
                        sha = data.sha;
                        console.log('Existing file found, SHA:', sha);
                    }
                } catch (err) {
                    console.warn('SHA fetch error:', err);
                }
                
                const response = await fetch(`https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${uploadTarget}`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${token}`, 
                        'Content-Type': 'application/json',
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({ 
                        message: `Update ${uploadType} image for ${produitId} - ${new Date().toISOString()}`, 
                        content: base64, 
                        sha: sha || undefined,
                        branch: 'main'
                    })
                });
                
                document.body.removeChild(uploading);
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('Upload successful:', data);
                    alert("‚úÖ Image sauvegard√©e avec succ√®s !"); 
                    
                    // Premier refresh imm√©diat
                    setTimeout(() => {
                        // Marquer qu'on vient d'uploader
                        sessionStorage.setItem('justUploaded', 'true');
                        location.reload();
                    }, 500);
                } else { 
                    const error = await response.json().catch(() => ({}));
                    console.error('Upload error:', { status: response.status, error });
                    alert(`‚ùå Erreur GitHub: ${response.status} - ${error.message || response.statusText}`);
                    if (response.status === 401 || response.status === 403) {
                        localStorage.removeItem('gh_token'); 
                    }
                }
            };
            
            reader.onerror = () => {
                document.body.removeChild(uploading);
                alert("‚ùå Erreur de lecture du fichier");
            };
        };

        /* ============================================================
           LANCEMENT & RENDU
        ============================================================ */
        window.onload = () => {
            // V√©rifier si on vient de faire un upload
            if (sessionStorage.getItem('justUploaded') === 'true') {
                sessionStorage.removeItem('justUploaded');
                // Attendre 2 secondes puis refresh automatique pour forcer le cache
                setTimeout(() => {
                    console.log('Second refresh pour forcer le cache GitHub...');
                    location.reload();
                }, 2000);
            }
            
            if(!produitId) return;
            loadScript("config.js", () => {
                loadScript(`${dossier}/${produitId}.js`, () => {
                    if (window.PRODUCT_DATA && window.GLOBAL_CONFIG) {
                        renderPage(window.PRODUCT_DATA, window.GLOBAL_CONFIG);
                    }
                });
            });
        };

        function loadScript(src, cb) {
            const s = document.createElement('script');
            s.src = src + "?v=" + version;
            s.onload = cb;
            document.head.appendChild(s);
        }

        function renderPage(pc, gc) {
            const d = document;
            const ui = UI_STRINGS[currentLang];
            d.getElementById('main-card').style.display = 'block';
            setTimeout(() => d.getElementById('main-card').style.opacity = "1", 50);

            // Interface
            d.getElementById('txt-showroom').innerText = ui.showroom;
            d.getElementById('btn-back').href = `index.html?lang=${currentLang}${isAdmin ? '&admin=1' : ''}`;
            d.getElementById('txt-print').innerText = ui.print;
            d.getElementById('txt-fixation').innerText = ui.fixation;
            d.getElementById('txt-inclus-title').innerHTML = `<i data-lucide="package" class="w-4 h-4"></i> ${ui.inclus}`;
            d.getElementById('txt-options-title').innerHTML = `<i data-lucide="zap" class="w-4 h-4"></i> ${ui.options}`;
            d.getElementById('txt-expert-title').innerText = ui.expert;
            d.getElementById('txt-entretien-title').innerText = ui.entretien;
            d.getElementById('ui-brand').innerText = gc.brand.nom;
            d.getElementById('ui-logo').src = gc.brand.logo;
            d.getElementById('ui-titre').innerText = t(pc.produit.titre);

            // Image Principale avec admin overlay
            const mImg = d.getElementById('ui-main-img');
            mImg.src = pc.media.imagePrincipale + "?v=" + version;
            
            if(isAdmin) {
                d.getElementById('admin-main-photo').innerHTML = '<i data-lucide="camera" class="text-[#FFD700] w-12 h-12"></i><span class="admin-overlay-label">Image principale</span>';
                d.getElementById('main-img-container').addEventListener('click', function() {
                    startUpload(produitId + '-main.jpg', 'main', null);
                });
            } else {
                d.getElementById('main-img-container').addEventListener('click', function() {
                    openZoom(pc.media.imagePrincipale);
                });
            }

            // Galerie avec admin overlay sur CHAQUE image - VERSION CORRIG√âE
            const galerieContainer = d.getElementById('ui-galerie');
            galerieContainer.innerHTML = ''; // Vider d'abord
            
            (pc.media.galerie || []).forEach((img, idx) => {
                // G√©rer les URLs relatives et compl√®tes
                let imgUrl;
                if (img.url.startsWith('http')) {
                    imgUrl = img.url;
                } else {
                    imgUrl = `https://raw.githubusercontent.com/${REPO_OWNER}/${REPO_NAME}/main/${img.url}`;
                }
                
                const fileName = `${produitId}-gal${idx}.jpg`;
                
                // Cr√©er l'√©l√©ment
                const galleryItem = document.createElement('div');
                galleryItem.className = 'zoomable-container bg-black/40 rounded-xl p-1.5 border border-white/5';
                galleryItem.style.cursor = 'pointer';
                
                if (isAdmin) {
                    galleryItem.innerHTML = `
                        <div class="admin-overlay">
                            <i data-lucide="camera" class="w-6 h-6 text-[#FFD700]"></i>
                            <span class="admin-overlay-label">Gal ${idx}</span>
                        </div>
                        <img src="${imgUrl}?v=${version}" class="w-full h-14 md:h-20 object-cover rounded-lg" 
                             onerror="this.style.opacity='0.3'; this.alt='Image manquante'">
                    `;
                    // Utiliser addEventListener avec closure pour capturer idx
                    galleryItem.addEventListener('click', (function(index, fname) {
                        return function() {
                            startUpload(fname, 'gallery', index);
                        };
                    })(idx, fileName));
                } else {
                    galleryItem.innerHTML = `
                        <img src="${imgUrl}?v=${version}" class="w-full h-14 md:h-20 object-cover rounded-lg" 
                             onerror="this.style.opacity='0.3'; this.alt='Image manquante'"
                             title="Cliquer pour agrandir">
                    `;
                    // Ajouter le zoom pour les utilisateurs normaux
                    galleryItem.addEventListener('click', (function(url) {
                        return function() {
                            openZoom(url);
                        };
                    })(imgUrl));
                }
                
                galerieContainer.appendChild(galleryItem);
            });

            // Remplissage technique (Specs, Team, etc.)
            d.getElementById('ui-addr').innerText = gc.brand.adresse + " | " + t(gc.brand.copyright);
            d.getElementById('ui-ref').innerText = "REF: " + (pc.produit.ref || "N/A");
            d.getElementById('ui-sn').innerText = "S/N: " + (pc.produit.sn || "PROTOTYPE");
            
            d.getElementById('ui-badges').innerHTML = (pc.badges || []).map(b => `<div class="ui-badge-print bg-white/5 px-3 py-2 rounded-full border border-white/10 text-[8px] font-black uppercase flex items-center gap-2"><i data-lucide="${b.icone}" class="w-3 h-3 ${b.couleur}"></i>${t(b.label)}</div>`).join('');
            
            const isPortrait = pc.dimensions.orientation === "portrait";
            d.getElementById('ui-3d').style.width = isPortrait ? "130px" : "220px";
            d.getElementById('ui-3d').style.height = isPortrait ? "220px" : "130px";
            d.getElementById('val-diag').innerText = pc.dimensions.diagonale;
            d.getElementById('val-w').innerText = pc.dimensions.largeur;
            d.getElementById('val-h').innerText = pc.dimensions.hauteur;
            d.getElementById('val-vesa').innerText = pc.dimensions.vesa;

            d.getElementById('ui-specs').innerHTML = (pc.specifications || []).map(s => `
                <div class="bg-black/30 p-6 rounded-[2rem] border border-white/5">
                    <h4 class="text-slate-400 font-black text-[10px] mb-5 flex items-center gap-3 uppercase"><i data-lucide="${s.icone}" class="w-4 h-4"></i>${t(s.titre)}</h4>
                    <div class="space-y-2">${(s.lignes || []).map(l => `<div class="flex justify-between border-b border-white/5 pb-1 text-[10px]"><span class="text-slate-500 italic">${t(l[0])}</span><span class="font-bold uppercase text-white">${t(l[1])}</span></div>`).join('')}</div>
                </div>`).join('');

            d.getElementById('ui-team').innerHTML = (gc.equipe || []).map(m => `<div class="border-b border-white/5 pb-5 last:border-0"><p class="font-black text-[11px] uppercase mb-0.5">${m.nom}</p><p class="text-slate-500 text-[8px] uppercase mb-3">${t(m.poste)}</p></div>`).join('');
            d.getElementById('ui-acc').innerHTML = (pc.accessoires || []).map(a => `<div><p class="font-black text-[10px] uppercase">${t(a.nom)}</p><p class="text-[9px] text-slate-500 italic uppercase">${t(a.detail)}</p></div>`).join('');
            d.getElementById('ui-opt').innerHTML = (pc.options || []).map(o => `<div class="bg-white/5 p-3 rounded-xl border border-white/5 flex items-center gap-2 font-bold uppercase text-[9px]"><i data-lucide="${o.icone}" class="w-3.5 h-3.5 text-[#FFD700]"></i>${t(o.nom)}</div>`).join('');
            d.getElementById('ui-entret-list').innerHTML = (pc.entretien || []).map(e => `<li class="flex items-start gap-2 text-white"><span class="text-[#FFD700]">‚ñπ</span>${t(e)}</li>`).join('');

            lucide.createIcons();
        }

        function openZoom(src) {
            let o = document.getElementById('zoom-overlay');
            if(!o) { 
                o = document.createElement('div'); 
                o.id = 'zoom-overlay'; 
                o.innerHTML = '<img id="z-img">'; 
                o.onclick = () => o.style.display='none'; 
                document.body.appendChild(o); 
            }
            document.getElementById('z-img').src = src; 
            o.style.display = 'flex';
        }

        function changeLang(l) { 
            params.set('lang', l); 
            window.location.search = params.toString(); 
        }
        
        // Close print options when clicking outside
        document.addEventListener('click', function(event) {
            const panel = document.getElementById('print-options-panel');
            const btnOptions = document.getElementById('btn-print-options');
            
            if (panel.classList.contains('open') && 
                !panel.contains(event.target) && 
                !btnOptions.contains(event.target)) {
                panel.classList.remove('open');
            }
        });
    </script>
</body>
</html>
